<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Qu√† 8/3 l·ªõp 12A4 ‚Äî Nh·∫≠p t√™n ƒë·ªÉ nh·∫≠n l·ªùi ch√∫c</title>
  <meta name="description" content="Nh·∫≠p t√™n + m·∫≠t kh·∫©u ƒë·ªÉ m·ªü trang ch√∫c m·ª´ng c√° nh√¢n ho√°." />
  <style>
    :root{
      --bg:#0e1222; --card:#12182b; --muted:#9aa3b2; --brand:#ff6aa7; --text:#eaf1ff;
      --radius:16px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background: radial-gradient(1200px 600px at 10% 10%, #17203a 0%, #0e1222 48%, #0b0f1c 100%);
      color:var(--text); font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial, "Helvetica Neue";
      display:flex; align-items:center; justify-content:center; padding:24px;
    }
    .wrap{width:100%; max-width:900px}
    header{margin-bottom:18px}
    h1{margin:0; font-size:clamp(20px, 3.5vw, 28px)}
    .lead{margin:6px 0 0; color:var(--muted); font-size:14px}
    .card{background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02)); border:1px solid rgba(255,255,255,0.06);
      border-radius: var(--radius); padding:18px; box-shadow: 0 20px 60px rgba(0,0,0,0.35)}
    .row{display:grid; grid-template-columns: 1fr auto; gap:12px; align-items:center}
    .field{display:flex; gap:10px; align-items:center}
    label{font-size:13px; color:var(--muted)}
    input[type="search"], input[type="password"]{
      width:100%; padding:12px 14px; border-radius:12px; border:1px solid rgba(255,255,255,0.06);
      background:rgba(255,255,255,0.04); color:var(--text); outline:none; font-size:16px
    }
    .btn{padding:12px 16px; border-radius:12px; border:0; background: linear-gradient(90deg, var(--brand), #ff4c94);
      color:#1a0f1d; font-weight:700; cursor:pointer}
    .suggestions{margin-top:8px; display:grid; gap:6px}
    .sug{padding:8px 10px; border-radius:10px; background:rgba(255,255,255,0.03); color:var(--muted); cursor:pointer}
    .sug:hover{background:rgba(255,255,255,0.06); color:var(--text)}
    .hidden{display:none !important}
    .profile{margin-top:16px; display:none}
    .profile.show{display:block}
    .hero{display:flex; gap:16px; align-items:center; flex-wrap:wrap}
    .badge{display:inline-block; padding:6px 10px; border-radius:999px; background:rgba(255,255,255,0.06); color:var(--muted); font-size:12px}
    .title{margin:0}
    .videoBox{margin-top:12px; background:#0a0f1d; border-radius:14px; border:1px solid rgba(255,255,255,0.06); padding:10px}
    video, iframe{width:100%; aspect-ratio:16/9; border:0; border-radius:10px}
    .msg{margin-top:12px; color:var(--text); white-space:pre-line}
    .note{margin-top:8px; color:var(--muted); font-size:13px}
    footer{margin-top:14px; color:var(--muted); font-size:12px; text-align:center}
    .mini{font-size:12px; color:var(--muted)}
    .copyLink{margin-left:8px; font-size:12px; cursor:pointer; color:#ffd9ea; background:none; border:none; text-decoration:underline}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Qu√† d√†nh ri√™ng cho c√°c b·∫°n n·ªØ 12A4 ‚ú®</h1>
      <p class="lead">G√µ <strong>t√™n</strong> c·ªßa b·∫°n + nh·∫≠p <strong>m·∫≠t kh·∫©u chung</strong> ƒë·ªÉ m·ªü trang c·ªßa ri√™ng b·∫°n.</p>
    </header>

    <main class="card">
      <div class="row">
        <div class="field">
          <div style="flex:1">
            <label for="name">T√™n c·ªßa b·∫°n</label>
            <input id="name" type="search" placeholder="V√≠ d·ª•: Nguy·ªÖn Th·ªã √Ånh / Anh" autocomplete="off" />
          </div>
          <div style="flex:1">
            <label for="pass">M·∫≠t kh·∫©u</label>
            <input id="pass" type="password" placeholder="Nh·∫≠p m·∫≠t kh·∫©u chung" />
          </div>
        </div>
        <button id="btnGo" class="btn">V√†o</button>
      </div>
      <div id="suggestions" class="suggestions"></div>

      <section id="profile" class="profile">
        <div class="hero">
          <div>
            <div class="badge">Trang c√° nh√¢n</div>
            <h2 id="displayName" class="title"></h2>
            <button class="copyLink mini" id="copyLink" title="Copy link c√° nh√¢n">Copy link c√° nh√¢n</button>
          </div>
        </div>

        <div class="videoBox" id="videoBox"></div>
        <div id="message" class="msg"></div>
        <div class="note">N·∫øu video kh√¥ng ch·∫°y, ki·ªÉm tra ƒë∆∞·ªùng link ho·∫∑c m·∫°ng. V·ªõi YouTube, n√™n ƒë·ªÉ ch·∫ø ƒë·ªô <em>Kh√¥ng c√¥ng khai (Unlisted)</em>.</div>
      </section>
      <footer>Made with üíó ‚Äî 12A4</footer>
    </main>
  </div>

  <script>
    // ======= C·∫§U H√åNH =======
    const PASSWORD = "C√°c b·∫°n nam 12A4 ƒë·∫πp trai";

    // D·ªØ li·ªáu m·∫´u: th√™m 42 b·∫°n ·ªü ƒë√¢y.
    // id: vi·∫øt kh√¥ng d·∫•u + g·∫°ch n·ªëi. name: t√™n hi·ªÉn th·ªã. video: link YouTube (chia s·∫ª) ho·∫∑c link file .mp4.
    // message: l·ªùi ch√∫c ri√™ng.
    const PROFILES = [
      { id:"nguyen-thi-anh", name:"Nguy·ªÖn Th·ªã √Ånh", video:"https://youtu.be/dQw4w9WgXcQ", message:"Ch√∫c √Ånh lu√¥n r·ª±c r·ª°, h·ªçc t·ªët v√† th·∫≠t h·∫°nh ph√∫c nh√©! üíñ" },
      { id:"le-thi-bich",    name:"L√™ Th·ªã B√≠ch",    video:"videos/bich.mp4",              message:"B√≠ch ∆°i, mong m·ªôt ng√†y tr√†n ti·∫øng c∆∞·ªùi v√† may m·∫Øn! üå∏" },
      { id:"tran-thu-ha",    name:"Tr·∫ßn Thu H√†",    video:"https://youtu.be/aqz-KE-bpKQ", message:"H√† th·∫≠t tuy·ªát! Ch√∫c lu√¥n m·∫°nh m·∫Ω, t·ª± tin v√† to·∫£ s√°ng ‚ú®" }
      // Th√™m 39 b·∫°n n·ªØa theo m·∫´u ‚Üë
    ];

    // ======= H√ÄM TI·ªÜN √çCH =======
    function normalize(s){
      if(!s) return "";
      s = s.toLowerCase();
      const map = {'√†':'a','√°':'a','·∫°':'a','·∫£':'a','√£':'a','√¢':'a','·∫ß':'a','·∫•':'a','·∫≠':'a','·∫©':'a','·∫´':'a','ƒÉ':'a','·∫±':'a','·∫Ø':'a','·∫∑':'a','·∫≥':'a','·∫µ':'a',
                   '√®':'e','√©':'e','·∫π':'e','·∫ª':'e','·∫Ω':'e','√™':'e','·ªÅ':'e','·∫ø':'e','·ªá':'e','·ªÉ':'e','·ªÖ':'e',
                   '√¨':'i','√≠':'i','·ªã':'i','·ªâ':'i','ƒ©':'i',
                   '√≤':'o','√≥':'o','·ªç':'o','·ªè':'o','√µ':'o','√¥':'o','·ªì':'o','·ªë':'o','·ªô':'o','·ªï':'o','·ªó':'o','∆°':'o','·ªù':'o','·ªõ':'o','·ª£':'o','·ªü':'o','·ª°':'o',
                   '√π':'u','√∫':'u','·ª•':'u','·ªß':'u','≈©':'u','∆∞':'u','·ª´':'u','·ª©':'u','·ª±':'u','·ª≠':'u','·ªØ':'u',
                   '·ª≥':'y','√Ω':'y','·ªµ':'y','·ª∑':'y','·ªπ':'y','ƒë':'d'};
      let out = "";
      for(const ch of s) out += map[ch] || ch;
      out = out.replace(/[^\w\s-]/g,"").replace(/\s+/g," ").trim();
      return out;
    }

    function isYouTube(url){
      return /youtu\.be\/|youtube\.com\/watch\?v=|youtube\.com\/shorts\//i.test(url);
    }
    function toYouTubeEmbed(url){
      try{
        // handle youtu.be/xxxx, youtube.com/watch?v=xxxx, /shorts/xxxx
        let id = null;
        if(url.includes("youtu.be/")){
          id = url.split("youtu.be/")[1].split(/[?&]/)[0];
        }else if(url.includes("/watch")){
          const u = new URL(url);
          id = u.searchParams.get("v");
        }else if(url.includes("/shorts/")){
          id = url.split("/shorts/")[1].split(/[?&]/)[0];
        }
        return id ? `https://www.youtube.com/embed/${id}` : url;
      }catch(e){ return url; }
    }

    // X√¢y d·ª±ng b·∫£ng tra c·ª©u
    const lookup = PROFILES.map(p => ({...p, norm: normalize(p.name)}));

    // ======= DOM =======
    const nameInput = document.getElementById('name');
    const passInput = document.getElementById('pass');
    const btnGo = document.getElementById('btnGo');
    const suggestions = document.getElementById('suggestions');
    const profile = document.getElementById('profile');
    const displayName = document.getElementById('displayName');
    const videoBox = document.getElementById('videoBox');
    const messageEl = document.getElementById('message');
    const copyBtn = document.getElementById('copyLink');

    // ======= LOGIC G·ª¢I √ù =======
    function renderSuggestions(q){
      suggestions.innerHTML = "";
      if(!q) return;
      const nq = normalize(q);
      const matched = lookup.filter(p => p.norm.includes(nq) || p.id.includes(nq)).slice(0,8);
      if(matched.length === 0){
        const d = document.createElement('div');
        d.className = 'sug'; d.textContent = "Kh√¥ng t√¨m th·∫•y ‚Äî th·ª≠ g√µ kh√¥ng d·∫•u ho·∫∑c m·ªôt ph·∫ßn t√™n.";
        suggestions.appendChild(d);
        return;
      }
      for(const p of matched){
        const d = document.createElement('div');
        d.className = 'sug'; d.textContent = p.name;
        d.onclick = () => { nameInput.value = p.name; suggestions.innerHTML=""; };
        suggestions.appendChild(d);
      }
    }
    nameInput.addEventListener('input', e => renderSuggestions(e.target.value));
    nameInput.addEventListener('keydown', e => { if(e.key === 'Enter') passInput.focus(); });
    passInput.addEventListener('keydown', e => { if(e.key === 'Enter') doLogin(); });
    btnGo.addEventListener('click', doLogin);

    // ======= X·ª¨ L√ù ƒêƒÇNG NH·∫¨P =======
    function doLogin(){
      const nameQ = nameInput.value.trim();
      const passQ = passInput.value.trim();
      if(!nameQ){ alert("Nh·∫≠p t√™n tr∆∞·ªõc nha."); nameInput.focus(); return; }
      if(!passQ){ alert("Nh·∫≠p m·∫≠t kh·∫©u chung nha."); passInput.focus(); return; }

      // t√¨m profile
      const nq = normalize(nameQ);
      const user = lookup.find(p => p.norm === nq) || lookup.find(p => p.norm.includes(nq)) || lookup.find(p => p.id === nq.replace(/\s+/g,"-"));
      if(!user){ alert("Ch∆∞a th·∫•y t√™n ph√π h·ª£p. Th·ª≠ g√µ kh√¥ng d·∫•u, ho·∫∑c m·ªôt ph·∫ßn t√™n."); return; }

      // ki·ªÉm tra m·∫≠t kh·∫©u (kh√¥ng ph√¢n bi·ªát hoa/th∆∞·ªùng, b·ªè d·∫•u)
      if(normalize(passQ) !== normalize(PASSWORD)){
        alert("Sai m·∫≠t kh·∫©u chung r·ªìi :(\nG·ª£i √Ω: 'C√°c b·∫°n nam 12A4 ƒë·∫πp trai'");
        passInput.focus();
        return;
      }

      openProfile(user);
    }

    function openProfile(user){
      // hi·ªÉn th·ªã
      displayName.textContent = user.name;
      messageEl.textContent = user.message || "";

      // video
      videoBox.innerHTML = "";
      if(isYouTube(user.video)){
        const src = toYouTubeEmbed(user.video);
        const ifr = document.createElement('iframe');
        ifr.src = src; ifr.allow = "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share";
        ifr.allowFullscreen = true;
        videoBox.appendChild(ifr);
      }else{
        const v = document.createElement('video');
        v.controls = true;
        const src = document.createElement('source');
        src.src = user.video;
        src.type = "video/mp4";
        v.appendChild(src);
        videoBox.appendChild(v);
      }

      profile.classList.add('show');
      // c·∫≠p nh·∫≠t hash ƒë·ªÉ t·∫°o link c√° nh√¢n
      location.hash = user.id;
    }

    // Copy link c√° nh√¢n
    copyBtn.addEventListener('click', async () => {
      try{
        const url = location.origin + location.pathname + "#" + (location.hash ? location.hash.replace("#","") : normalize(nameInput.value).replace(/\s+/g,"-"));
        await navigator.clipboard.writeText(url);
        copyBtn.textContent = "ƒê√£ copy ‚úî";
        setTimeout(()=> copyBtn.textContent = "Copy link c√° nh√¢n", 1500);
      }catch(e){
        alert("Kh√¥ng copy ƒë∆∞·ª£c, m√†y t·ª± gi·ªØ link tr√™n thanh ƒë·ªãa ch·ªâ nh√©.");
      }
    });

    // N·∫øu c√≥ hash tr√™n URL (#id) th√¨ t·ª± ƒëi·ªÅn t√™n t∆∞∆°ng ·ª©ng
    window.addEventListener('load', () => {
      const hash = location.hash.replace("#","");
      if(!hash) return;
      const user = lookup.find(p => p.id === hash);
      if(user){
        nameInput.value = user.name;
        renderSuggestions(user.name);
      }
    });
  </script>
</body>
</html>
